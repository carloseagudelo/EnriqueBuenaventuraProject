<%= tinymce_assets %>
<article>	
	<iframe name="doc" id="iframeList" src="<%= document_list_path %>" style="position:absolute;top:5;left:0;width:50%;height:100%;">
	</iframe>	

	<div style="position:absolute;top:5;left:50%;width:50%;height:100%;">

	    <%= form_for :article, url: document_article_path(:document_id, :article), method: :patch  do |f| %>
	    
	        <p>
	            <%= f.label :nombre_del_articulo %><br />
	            <%= f.text_field :name %>
	        </p>
	        
	        <p>
	            <%= f.label :DescripciÃ³n %><br />
	            <%= f.text_area :decription %>                
	        </p>

	        <p>
	            <%= f.label :date %><br />
	            <%= f.date_field :date %>
	        </p>

	        <%= f.text_area :attachment, :class => "tinymce", :rows => 10, :cols => 30 %>
	        
	        <%= f.submit "Guardar" %><br /><br />

	    <% end %>
	    <%= tinymce %>

	    
		
		<%= link_to "Crear Citacion", "#", :class=>"btn btn-default", data: {toggle: "modal", target: "#modal"} %>

		<div class="modal fade" role="dialog">
		  <div id="modal1" class="modal-dialog">

		    <!-- Modal content-->
			    <div class="modal-content">
			      <div class="modal-header">
			        <button type="button" class="close" data-dismiss="modal">&times;</button>
			        <h4 class="modal-title">Deposite el pedazo de texto que desea citar, y asegurese de que este correcto antes de hacer clip en el boton 'Crear Citacion'</h4>
			      </div>
			      <div  class="modal-body">
			        <textarea id="myTextarea" rows="15" cols="90"></textarea>
			      </div>
			      <div class="modal-footer">
			        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			        <button type="button" onclick="myFunction()" class="btn btn-default" data-dismiss="modal">Crear Citacion</button>
			      </div>
			    </div>
		  </div>
		</div>
	</div>
</article>



<script>
function getContent(){
	var y = $("#myTextarea").val();
	return (y);
}

function myFunction() {
	var contentTextArea = getContent();
    var numPage = document.getElementById('iframeList').contentWindow.document.getElementById('iframe').contentWindow.document.getElementById('pageNumber').value;
    var nameDoc = document.getElementById('iframeList').contentWindow.document.getElementById('nameDoc').innerHTML;     
    var citacion = '<br />Buenaventura, Enrique, ' +nameDoc+', 1998, Editorial Edalse, 2000, pg. '+numPage;
    var citacionCompleta = contentTextArea+citacion;
    var contentTextEditor = tinyMCE.activeEditor.getContent();
    var contenidoCompletoEditor = contentTextEditor+citacionCompleta;
    tinyMCE.activeEditor.setContent(contenidoCompletoEditor);
    document.getElementById("myTextarea").value = '';
}
</script>

